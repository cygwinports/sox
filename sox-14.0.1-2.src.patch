diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x soxconfig.h origsrc/sox-14.0.1/Makefile.am src/sox-14.0.1/Makefile.am
--- origsrc/sox-14.0.1/Makefile.am	2007-10-21 17:50:20.000000000 -0500
+++ src/sox-14.0.1/Makefile.am	2008-02-04 22:56:30.187500000 -0600
@@ -28,8 +28,8 @@
 pdf: sox.pdf soxeffect.pdf soxformat.pdf soxexam.pdf libsox.pdf
 
 install-data-hook:
-	cd $(DESTDIR)$(mandir)/man1 && $(RM) play.1 && $(LN_S) sox.1 play.1
-	cd $(DESTDIR)$(mandir)/man1 && $(RM) rec.1 && $(LN_S) sox.1 rec.1
+	cd $(DESTDIR)$(mandir)/man1 && $(RM) play.1 && echo ".so sox.1" > play.1
+	cd $(DESTDIR)$(mandir)/man1 && $(RM) rec.1 && echo ".so sox.1" > rec.1
 
 # Automatically update libtool script if it gets out-of-date
 libtool: $(LIBTOOL_DEPS)
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x soxconfig.h origsrc/sox-14.0.1/configure.ac src/sox-14.0.1/configure.ac
--- origsrc/sox-14.0.1/configure.ac	2008-01-28 16:47:14.000000000 -0600
+++ src/sox-14.0.1/configure.ac	2008-02-04 22:56:30.203125000 -0600
@@ -29,13 +29,6 @@
     if test "$enable_shared" != "no"; then
         using_libltdl=yes
     fi
-    dnl Force off using libltdl on targets that are know to have
-    dnl problems.
-    case $target in
-      *cygwin*)
-        using_libltdl=no
-        ;;
-    esac
 fi
 
 if test "$using_libltdl" != "no"; then
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x soxconfig.h origsrc/sox-14.0.1/src/Makefile.am src/sox-14.0.1/src/Makefile.am
--- origsrc/sox-14.0.1/src/Makefile.am	2008-01-13 21:40:59.000000000 -0600
+++ src/sox-14.0.1/src/Makefile.am	2008-02-04 22:56:30.218750000 -0600
@@ -48,142 +48,193 @@
 # File format detection
 libsox_fmt_auto_la_SOURCES = auto.c
 libsox_fmt_auto_la_LIBADD = libsox.la
+libsox_fmt_auto_la_LDFLAGS = -module -avoid-version -no-undefined
 
 # File formats
 libsox_fmt_raw_la_SOURCES = raw-fmt.c
 libsox_fmt_raw_la_LIBADD = libsox.la
+libsox_fmt_raw_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_s1_la_SOURCES = s1-fmt.c
 libsox_fmt_s1_la_LIBADD = libsox.la
+libsox_fmt_s1_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_s2_la_SOURCES = s2-fmt.c
 libsox_fmt_s2_la_LIBADD = libsox.la
+libsox_fmt_s2_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_s3_la_SOURCES = s3-fmt.c
 libsox_fmt_s3_la_LIBADD = libsox.la
+libsox_fmt_s3_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_s4_la_SOURCES = s4-fmt.c
 libsox_fmt_s4_la_LIBADD = libsox.la
+libsox_fmt_s4_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_u1_la_SOURCES = u1-fmt.c
 libsox_fmt_u1_la_LIBADD = libsox.la
+libsox_fmt_u1_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_u2_la_SOURCES = u2-fmt.c
 libsox_fmt_u2_la_LIBADD = libsox.la
+libsox_fmt_u2_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_u3_la_SOURCES = u3-fmt.c
 libsox_fmt_u3_la_LIBADD = libsox.la
+libsox_fmt_u3_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_u4_la_SOURCES = u4-fmt.c
 libsox_fmt_u4_la_LIBADD = libsox.la
+libsox_fmt_u4_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_al_la_SOURCES = al-fmt.c
 libsox_fmt_al_la_LIBADD = libsox.la
+libsox_fmt_al_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_la_la_SOURCES = la-fmt.c
 libsox_fmt_la_la_LIBADD = libsox.la
+libsox_fmt_la_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_ul_la_SOURCES = ul-fmt.c
 libsox_fmt_ul_la_LIBADD = libsox.la
+libsox_fmt_ul_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_lu_la_SOURCES = lu-fmt.c
 libsox_fmt_lu_la_LIBADD = libsox.la
+libsox_fmt_lu_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_svx_la_SOURCES = 8svx.c
 libsox_fmt_svx_la_LIBADD = libsox.la
+libsox_fmt_svx_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_aiff_la_SOURCES = aiff-fmt.c
 libsox_fmt_aiff_la_LIBADD = libsox.la
+libsox_fmt_aiff_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_aifc_la_SOURCES = aifc-fmt.c
 libsox_fmt_aifc_la_LIBADD = libsox.la
+libsox_fmt_aifc_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_au_la_SOURCES = au.c
 libsox_fmt_au_la_LIBADD = libsox.la
+libsox_fmt_au_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_avr_la_SOURCES = avr.c
 libsox_fmt_avr_la_LIBADD = libsox.la
+libsox_fmt_avr_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_cdr_la_SOURCES = cdr.c
 libsox_fmt_cdr_la_LIBADD = libsox.la
+libsox_fmt_cdr_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_cvsd_la_SOURCES = cvsd-fmt.c
 libsox_fmt_cvsd_la_LIBADD = libsox.la
+libsox_fmt_cvsd_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_dvms_la_SOURCES = dvms-fmt.c
 libsox_fmt_dvms_la_LIBADD = libsox.la
+libsox_fmt_dvms_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_dat_la_SOURCES = dat.c
 libsox_fmt_dat_la_LIBADD = libsox.la
+libsox_fmt_dat_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_gsm_la_SOURCES = gsm.c
 libsox_fmt_gsm_la_LIBADD = libsox.la @GSM_LIBS@ @LIBGSM_LIBADD@
+libsox_fmt_gsm_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_hcom_la_SOURCES = hcom.c
 libsox_fmt_hcom_la_LIBADD = libsox.la
+libsox_fmt_hcom_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_lpc10_la_SOURCES = lpc10.c
 libsox_fmt_lpc10_la_LIBADD = ../lpc10/liblpc10.la libsox.la
+libsox_fmt_lpc10_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_maud_la_SOURCES = maud.c
 libsox_fmt_maud_la_LIBADD = libsox.la
+libsox_fmt_maud_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_prc_la_SOURCES = prc.c
 libsox_fmt_prc_la_LIBADD = libsox.la
+libsox_fmt_prc_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_sf_la_SOURCES = sf.c sfircam.h
 libsox_fmt_sf_la_LIBADD = libsox.la
+libsox_fmt_sf_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_smp_la_SOURCES = smp.c
 libsox_fmt_smp_la_LIBADD = libsox.la
+libsox_fmt_smp_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_sndrtool_la_SOURCES = sndrtool.c
 libsox_fmt_sndrtool_la_LIBADD = libsox.la
+libsox_fmt_sndrtool_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_sphere_la_SOURCES = sphere.c
 libsox_fmt_sphere_la_LIBADD = libsox.la
+libsox_fmt_sphere_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_txw_la_SOURCES = tx16w.c
 libsox_fmt_txw_la_LIBADD = libsox.la
+libsox_fmt_txw_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_voc_la_SOURCES = voc.c
 libsox_fmt_voc_la_LIBADD = libsox.la
+libsox_fmt_voc_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_vox_la_SOURCES = vox-fmt.c
 libsox_fmt_vox_la_LIBADD = libsox.la
+libsox_fmt_vox_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_ima_la_SOURCES = ima-fmt.c
 libsox_fmt_ima_la_LIBADD = libsox.la
+libsox_fmt_ima_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_wav_la_SOURCES = adpcm.c adpcm.h ima_rw.c ima_rw.h wav.c wav.h
 libsox_fmt_wav_la_LIBADD = libsox.la @GSM_LIBS@ @LIBGSM_LIBADD@
+libsox_fmt_wav_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_wve_la_SOURCES = wve.c
 libsox_fmt_wve_la_LIBADD = libsox.la
+libsox_fmt_wve_la_LDFLAGS = -module -avoid-version -no-undefined
 libsox_fmt_xa_la_SOURCES = xa.c
 libsox_fmt_xa_la_LIBADD = libsox.la
+libsox_fmt_xa_la_LDFLAGS = -module -avoid-version -no-undefined
 if HAVE_FLAC
 libsox_fmt_flac_la_SOURCES = flac.c
 libsox_fmt_flac_la_LIBADD = libsox.la @FLAC_LIBS@
+libsox_fmt_flac_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_flac.la
 endif
 if HAVE_FFMPEG
 libsox_fmt_ffmpeg_la_SOURCES = ffmpeg.c
 libsox_fmt_ffmpeg_la_LIBADD = libsox.la @FFMPEG_LIBS@
+libsox_fmt_ffmpeg_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_ffmpeg.la
 endif
 if HAVE_SNDFILE
 libsox_fmt_sndfile_la_SOURCES = sndfile.c
 libsox_fmt_sndfile_la_CFLAGS = @SNDFILE_CFLAGS@
 libsox_fmt_sndfile_la_LIBADD = libsox.la @SNDFILE_LIBS@
+libsox_fmt_sndfile_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_sndfile.la
 endif
 if HAVE_AMRWB
 libsox_fmt_amr_wb_la_SOURCES = amr-wb.c amr.h
 libsox_fmt_amr_wb_la_LIBADD = libsox.la @AMR_WB_LIBS@
+libsox_fmt_amr_wb_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_amr_wb.la
 endif
 if HAVE_AMRNB
 libsox_fmt_amr_nb_la_SOURCES = amr-nb.c amr.h
 libsox_fmt_amr_nb_la_LIBADD = libsox.la @AMR_NB_LIBS@
+libsox_fmt_amr_nb_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_amr_nb.la
 endif
 if HAVE_MP3
 libsox_fmt_mp3_la_SOURCES = mp3.c mp3-duration.h
 libsox_fmt_mp3_la_LIBADD = libsox.la @MP3_LIBS@
+libsox_fmt_mp3_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_mp3.la
 endif
 if HAVE_OGG_VORBIS
 libsox_fmt_vorbis_la_SOURCES = vorbis.c
 libsox_fmt_vorbis_la_LIBADD = libsox.la @OGG_LIBS@
+libsox_fmt_vorbis_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_vorbis.la
 endif
 
 # I/O devices
 libsox_fmt_nul_la_SOURCES = nulfile.c
 libsox_fmt_nul_la_LIBADD = libsox.la
+libsox_fmt_nul_la_LDFLAGS = -module -avoid-version -no-undefined
 if HAVE_ALSA
 libsox_fmt_alsa_la_SOURCES = alsa.c
 libsox_fmt_alsa_la_LIBADD = libsox.la @ALSA_LIBS@
+libsox_fmt_alsa_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_alsa.la
 endif
 if HAVE_LIBAO
 libsox_fmt_ao_la_SOURCES = ao.c
 libsox_fmt_ao_la_LIBADD = libsox.la @AO_LIBS@
+libsox_fmt_ao_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_ao.la
 endif
 if HAVE_OSS
 libsox_fmt_oss_la_SOURCES = oss.c
 libsox_fmt_oss_la_LIBADD = libsox.la @OSS_LIBS@
+libsox_fmt_oss_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_oss.la
 endif
 if HAVE_SUN_AUDIO
 libsox_fmt_sunau_la_SOURCES = sunaudio.c
 libsox_fmt_sunau_la_LIBADD = libsox.la
+libsox_fmt_sunau_la_LDFLAGS = -module -avoid-version -no-undefined
 pkglib_LTLIBRARIES += libsox_fmt_sunau.la
 endif
 endif
@@ -202,6 +253,7 @@
 	  vol.c
 libsfx_la_CFLAGS = @SAMPLERATE_CFLAGS@
 libsfx_la_LIBADD = @SAMPLERATE_LIBS@ libsox.la
+libsfx_la_LDFLAGS = -no-undefined
 
 ############################################
 # libsox - file format and utility library #
@@ -213,8 +265,10 @@
 	  soxio.c util.c xmalloc.c xmalloc.h getopt.c getopt1.c getopt.h \
 	  soxconfig.h
 libsox_la_CFLAGS = 
+libsox_la_LDFLAGS = -no-undefined
 
 if HAVE_LIBLTDL
+libsox_la_LIBADD = $(LIBLTDL)
 else
   libsox_la_SOURCES += auto.c raw-fmt.c s1-fmt.c s2-fmt.c s3-fmt.c \
     s4-fmt.c u1-fmt.c u2-fmt.c u3-fmt.c u4-fmt.c al-fmt.c la-fmt.c ul-fmt.c \
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x soxconfig.h origsrc/sox-14.0.1/src/gsm.c src/sox-14.0.1/src/gsm.c
--- origsrc/sox-14.0.1/src/gsm.c	2007-11-04 10:28:29.000000000 -0600
+++ src/sox-14.0.1/src/gsm.c	2008-02-04 22:56:30.218750000 -0600
@@ -28,11 +28,15 @@
 
 #include "sox_i.h"
 
-#ifdef EXTERNAL_GSM
+#ifdef HAVE_GSM_GSM_H
 #include <gsm/gsm.h>
 #else
+#ifdef HAVE_GSM_H
+#include <gsm.h>
+#else
 #include "../libgsm/gsm.h"
 #endif
+#endif
 
 #include <errno.h>
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in -x soxconfig.h origsrc/sox-14.0.1/src/wav.c src/sox-14.0.1/src/wav.c
--- origsrc/sox-14.0.1/src/wav.c	2007-11-04 10:28:31.000000000 -0600
+++ src/sox-14.0.1/src/wav.c	2008-02-04 22:56:30.250000000 -0600
@@ -23,11 +23,15 @@
 #include "wav.h"
 #include "ima_rw.h"
 #include "adpcm.h"
-#ifdef EXTERNAL_GSM
+#ifdef HAVE_GSM_GSM_H
 #include <gsm/gsm.h>
 #else
+#ifdef HAVE_GSM_H
+#include <gsm.h>
+#else
 #include "../libgsm/gsm.h"
 #endif
+#endif
 
 /* To allow padding to samplesPerBlock. Works, but currently never true. */
 static sox_size_t pad_nsamps = sox_false;
